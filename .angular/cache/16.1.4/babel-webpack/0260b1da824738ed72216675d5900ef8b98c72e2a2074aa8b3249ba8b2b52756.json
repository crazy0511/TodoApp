{"ast":null,"code":"import { Subject, map, takeUntil } from 'rxjs';\nimport { Filter } from 'src/app/models/filter.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/todo.service\";\nimport * as i2 from \"@angular/common\";\nconst _c0 = function (a0) {\n  return {\n    active: a0\n  };\n};\nfunction FooterComponent_button_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 5);\n    i0.ɵɵlistener(\"click\", function FooterComponent_button_5_Template_button_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const btn_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.filter(btn_r1.type));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const btn_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(2, _c0, btn_r1.isActive));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", btn_r1.label, \" \");\n  }\n}\nconst _c1 = function (a0) {\n  return {\n    \"visible\": a0\n  };\n};\nexport class FooterComponent {\n  constructor(todoService) {\n    this.todoService = todoService;\n    this.filterButtons = [{\n      type: Filter.All,\n      label: 'All',\n      isActive: true\n    }, {\n      type: Filter.Active,\n      label: 'Active',\n      isActive: false\n    }, {\n      type: Filter.Completed,\n      label: 'Completed',\n      isActive: false\n    }];\n    this.length = 0;\n    this.destroy$ = new Subject();\n  }\n  ngOnInit() {\n    //takeUntil\n    this.hasCompletes$ = this.todoService.todo$.pipe(map(todos => todos.some(t => t.isCompleted)), takeUntil(this.destroy$));\n    this.todoService.length$.pipe(takeUntil(this.destroy$)).subscribe(length => {\n      this.length = length;\n    });\n  }\n  filter(type) {\n    this.setActiveFilterBtn(type);\n    this.todoService.filterTodo(type);\n  }\n  clearCompleted() {\n    this.todoService.clearCompleted();\n  }\n  setActiveFilterBtn(type) {\n    this.filterButtons.forEach(btn => {\n      btn.isActive = btn.type === type;\n    });\n  }\n  // Destroy khi không có Task nào\n  ngOnDestroy() {\n    this.destroy$.next;\n    this.destroy$.complete();\n  }\n}\nFooterComponent.ɵfac = function FooterComponent_Factory(t) {\n  return new (t || FooterComponent)(i0.ɵɵdirectiveInject(i1.TodoService));\n};\nFooterComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: FooterComponent,\n  selectors: [[\"app-footer\"]],\n  decls: 9,\n  vars: 8,\n  consts: [[1, \"footer\", \"w-100\"], [1, \"h-100\", \"position-absolute\", \"d-flex\", \"justify-content-between\", \"align-items-center\", 2, \"top\", \"0\", \"bottom\", \"0\", \"left\", \"0\", \"right\", \"0\"], [1, \"items-count\"], [\"type\", \"button\", \"class\", \"filter-btn\", 3, \"ngClass\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"filter-btn\", \"clear-completed-btn\", 3, \"ngClass\", \"click\"], [\"type\", \"button\", 1, \"filter-btn\", 3, \"ngClass\", \"click\"]],\n  template: function FooterComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"span\", 2);\n      i0.ɵɵtext(3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"div\");\n      i0.ɵɵtemplate(5, FooterComponent_button_5_Template, 2, 4, \"button\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"button\", 4);\n      i0.ɵɵlistener(\"click\", function FooterComponent_Template_button_click_6_listener() {\n        return ctx.clearCompleted();\n      });\n      i0.ɵɵpipe(7, \"async\");\n      i0.ɵɵtext(8, \" Clear Completed \");\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate2(\" \", ctx.length, \" item\", ctx.length > 1 ? \"s\" : \"\", \" \");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.filterButtons);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(6, _c1, i0.ɵɵpipeBind1(7, 4, ctx.hasCompletes$)));\n    }\n  },\n  dependencies: [i2.NgClass, i2.NgForOf, i2.AsyncPipe],\n  styles: [\"\\n\\n\\n.footer[_ngcontent-%COMP%]{\\n    position: relative;\\n    height: 40px;\\n    border-top: 1px solid rgba(0, 0, 0, 0.1);\\n}\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.filter-btn[_ngcontent-%COMP%]{\\n    padding: 5px;\\n    border-radius: 0.25rem;\\n    transition: 250ms all ease-in-out;\\n    outline: none;\\n    cursor: pointer;\\n    margin-right: white;\\n    border: 1px solid white;\\n}\\n\\n.filter-btn[_ngcontent-%COMP%]:hover{\\n    border-color: burlywood;\\n}\\n\\n.filter-btn.active[_ngcontent-%COMP%]{\\n    border-color: burlywood;\\n}\\n\\n.clear-completed-btn[_ngcontent-%COMP%]{\\n    visibility: hidden;\\n}\\n\\n.clear-completed-btn.visible[_ngcontent-%COMP%]{\\n    visibility: visible;\\n}\\n\\n.items-count[_ngcontent-%COMP%]{\\n    padding-left: 10px;\\n}\\n\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9mb290ZXIvZm9vdGVyLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7NEJBQzRCO0FBQzVCO0lBQ0ksa0JBQWtCO0lBQ2xCLFlBQVk7SUFDWix3Q0FBd0M7QUFDNUM7O0FBRUE7cUVBQ3FFO0FBQ3JFO3dEQUN3RDtBQUN4RDs7Ozs7Ozs7Ozs7OztHQWFHOztBQUVIO0lBQ0ksWUFBWTtJQUNaLHNCQUFzQjtJQUN0QixpQ0FBaUM7SUFDakMsYUFBYTtJQUNiLGVBQWU7SUFDZixtQkFBbUI7SUFDbkIsdUJBQXVCO0FBQzNCOztBQUVBO0lBQ0ksdUJBQXVCO0FBQzNCOztBQUVBO0lBQ0ksdUJBQXVCO0FBQzNCOztBQUVBO0lBQ0ksa0JBQWtCO0FBQ3RCOztBQUVBO0lBQ0ksbUJBQW1CO0FBQ3ZCOztBQUVBO0lBQ0ksa0JBQWtCO0FBQ3RCIiwic291cmNlc0NvbnRlbnQiOlsiLyogIMOEwpDDocK6wrd0IHbDocK7wosgdHLDg8KtIGPDocK7wqdhIHBow6HCusKnbiB0w6HCu8KtIGzDg8KgIHTDhsKww4bCoW5nIMOEwpHDocK7wpFpIHbDocK7wptpIFxyXG4gICAgdsOhwrvCiyB0csODwq0gY8OhwrvCp2EgcGjDocK6wqduIHTDocK7wq0gY2hhICovXHJcbi5mb290ZXJ7XHJcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgICBoZWlnaHQ6IDQwcHg7XHJcbiAgICBib3JkZXItdG9wOiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjEpO1xyXG59XHJcblxyXG4vKiAgVGh1w6HCu8KZYyB0w4PCrW5oIHBvc2l0aW9uOiBhYnNvbHV0ZTsgw4TCkcOhwrrCt3QgdsOhwrvCiyB0csODwq0gY8OhwrvCp2EgcHNldWRvLWVsZW1lbnQgbMODwqAgdHV5w6HCu8KHdCDDhMKRw6HCu8KRaSDDhMKRw6HCu8KRaSB2w6HCu8KbaSBwaMOhwrrCp24gdMOhwrvCrSBjaGEuIFxyXG4gICAgw4TCkGnDocK7woF1IG7Dg8KgeSBjaG8gcGjDg8KpcCBjaMODwrpuZyB0YSDDhMKRw6HCusK3dCBwc2V1ZG8tZWxlbWVudCB0csODwqpuIHBow6HCusKnbiB0w6HCu8KtIGNoYS4gKi9cclxuLyogIFRodcOhwrvCmWMgdMODwq1uaCBvdmVyZmxvdzogaGlkZGVuOyDDocK6wqluIGLDocK6wqV0IGvDocK7wrMgbsOhwrvCmWkgZHVuZyBuw4PCoG8gXHJcbiAgICAgdsOGwrDDocK7wqN0IHJhIGtow6HCu8KPaSBraHUgdsOhwrvCsWMgZ2nDocK7wptpIGjDocK6wqFuIGPDocK7wqdhIHBzZXVkby1lbGVtZW50LiAqL1xyXG4vKiAuZm9vdGVyOmJlZm9yZXtcclxuICAgIGNvbnRlbnQ6ICcnO1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgcmlnaHQ6IDA7XHJcbiAgICBib3R0b206IDA7XHJcbiAgICBsZWZ0OiAwO1xyXG4gICAgaGVpZ2h0OiA1MHB4O1xyXG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICAgIGJveC1zaGFkb3c6IDAgMXB4IDFweCByZ2JhKDAsIDAsIDAsIDAuMiksXHJcbiAgICAwIDhweCAwIC0zcHggI2Y2ZjZmNixcclxuICAgIDAgOXB4IDFweCAtM3B4IHJnYmEoMCwgMCwgMCwgMC4yKSxcclxuICAgIDAgMTZweCAwIC02cHggI2Y2ZjZmNixcclxuICAgIDAgMTdweCAycHggLTZweCByZ2JhKDAsIDAsIDAsIDAuMiksO1xyXG59ICovXHJcblxyXG4uZmlsdGVyLWJ0bntcclxuICAgIHBhZGRpbmc6IDVweDtcclxuICAgIGJvcmRlci1yYWRpdXM6IDAuMjVyZW07XHJcbiAgICB0cmFuc2l0aW9uOiAyNTBtcyBhbGwgZWFzZS1pbi1vdXQ7XHJcbiAgICBvdXRsaW5lOiBub25lO1xyXG4gICAgY3Vyc29yOiBwb2ludGVyO1xyXG4gICAgbWFyZ2luLXJpZ2h0OiB3aGl0ZTtcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkIHdoaXRlO1xyXG59XHJcblxyXG4uZmlsdGVyLWJ0bjpob3ZlcntcclxuICAgIGJvcmRlci1jb2xvcjogYnVybHl3b29kO1xyXG59XHJcblxyXG4uZmlsdGVyLWJ0bi5hY3RpdmV7XHJcbiAgICBib3JkZXItY29sb3I6IGJ1cmx5d29vZDtcclxufVxyXG5cclxuLmNsZWFyLWNvbXBsZXRlZC1idG57XHJcbiAgICB2aXNpYmlsaXR5OiBoaWRkZW47XHJcbn1cclxuXHJcbi5jbGVhci1jb21wbGV0ZWQtYnRuLnZpc2libGV7XHJcbiAgICB2aXNpYmlsaXR5OiB2aXNpYmxlO1xyXG59XHJcblxyXG4uaXRlbXMtY291bnR7XHJcbiAgICBwYWRkaW5nLWxlZnQ6IDEwcHg7XHJcbn1cclxuXHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"names":["Subject","map","takeUntil","Filter","i0","ɵɵelementStart","ɵɵlistener","FooterComponent_button_5_Template_button_click_0_listener","restoredCtx","ɵɵrestoreView","_r3","btn_r1","$implicit","ctx_r2","ɵɵnextContext","ɵɵresetView","filter","type","ɵɵtext","ɵɵelementEnd","ɵɵproperty","ɵɵpureFunction1","_c0","isActive","ɵɵadvance","ɵɵtextInterpolate1","label","FooterComponent","constructor","todoService","filterButtons","All","Active","Completed","length","destroy$","ngOnInit","hasCompletes$","todo$","pipe","todos","some","t","isCompleted","length$","subscribe","setActiveFilterBtn","filterTodo","clearCompleted","forEach","btn","ngOnDestroy","next","complete","ɵɵdirectiveInject","i1","TodoService","selectors","decls","vars","consts","template","FooterComponent_Template","rf","ctx","ɵɵtemplate","FooterComponent_button_5_Template","FooterComponent_Template_button_click_6_listener","ɵɵtextInterpolate2","_c1","ɵɵpipeBind1"],"sources":["D:\\Data\\TTS_Angular\\ToDoApp\\angular_todoapp\\src\\app\\components\\footer\\footer.component.ts","D:\\Data\\TTS_Angular\\ToDoApp\\angular_todoapp\\src\\app\\components\\footer\\footer.component.html"],"sourcesContent":["import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { Observable, Subject, map, takeUntil } from 'rxjs';\nimport { Filter, FilterButton } from 'src/app/models/filter.model';\nimport { TodoService } from 'src/app/services/todo.service';\n\n@Component({\n  selector: 'app-footer',\n  templateUrl: './footer.component.html',\n  styleUrls: ['./footer.component.css']\n})\nexport class FooterComponent implements OnInit, OnDestroy{\n  filterButtons: FilterButton[] = [\n    {type: Filter.All, label: 'All', isActive: true},\n    {type: Filter.Active, label: 'Active', isActive: false},\n    {type: Filter.Completed, label: 'Completed', isActive: false},\n  ]\n\n  length = 0;\n  hasCompletes$!: Observable<boolean>;\n  destroy$: Subject<null> = new Subject<null>();\n\n  constructor(private todoService: TodoService){\n\n  }\n\n  ngOnInit(){\n    //takeUntil\n    this.hasCompletes$ = this.todoService.todo$.pipe(\n      map(todos => todos.some(t => t.isCompleted)),\n      takeUntil(this.destroy$)\n    );\n\n    this.todoService.length$.pipe(takeUntil(this.destroy$))\n      .subscribe(length => {\n        this.length = length;\n      })\n  }\n\n  filter(type: Filter){\n    this.setActiveFilterBtn(type);\n    this.todoService.filterTodo(type);\n  }\n\n  clearCompleted(){\n    this.todoService.clearCompleted();\n  }\n\n  private setActiveFilterBtn(type: Filter){\n    this.filterButtons.forEach(btn => {\n      btn.isActive = btn.type === type;\n    });\n  }\n\n  // Destroy khi không có Task nào\n  ngOnDestroy(){\n      this.destroy$.next;\n      this.destroy$.complete();\n  }\n}\n\n","<div class=\"footer w-100\">\n  <div\n    class=\"h-100 position-absolute d-flex justify-content-between align-items-center\"\n    style=\"top: 0; bottom: 0; left: 0; right: 0\"\n  >\n    <!-- Hiện thị length item -->\n    <span class=\"items-count\">\n      {{ length }} item{{ length > 1 ? \"s\" : \"\" }}\n    </span>\n\n    <!-- Hiện thị filter -->\n    <div>\n      <button\n        type=\"button\" class=\"filter-btn\"\n        *ngFor=\"let btn of filterButtons\"\n        [ngClass]=\"{ active: btn.isActive }\"\n        (click)=\"filter(btn.type)\"\n      >\n        {{ btn.label }}\n      </button>\n    </div>\n    <button class=\"filter-btn clear-completed-btn\" \n    [ngClass]=\"{'visible': hasCompletes$ | async}\"\n    (click)=\"clearCompleted()\"\n    >\n      Clear Completed\n    </button>\n  </div>\n</div>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}